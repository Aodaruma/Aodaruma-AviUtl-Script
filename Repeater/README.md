# Repeater

様々な形でループ状にオブジェクトを配置するスクリプトです。

現在は **version 1.31** が最新です。

[![Watch the video](<<<<https://img.youtube.com/vi/<--youtube>>>> URL here->/maxresdefault.jpg)](<<<<https://youtu.be/<--youtube>>>> url id here -->)

以下のスクリプトが備わっています。

## @Repeater

### line

直線状にオブジェクトをループ配置するスクリプトです。

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - Length
    - 線の長さ(点の個数)を設定します。

  - Angle
    - 線の方向を決めます。

  - Interval
    - 辺上の各点の間隔を設定します。

  - Moving
    - 線の点群がどれだけ移動するかを設定します。

  - Fixed
    - 点自体が移動せず、固定された状態でスライドのように描画するかどうかを設定します。

- **ダイアログ**

  - 仮想バッファ
    - 仮想バッファを利用して、線を一枚の画像にすることができます。

  - 傾きに従う
    - 線の動きに関して、動く方向に各図形が角度に従うように設定します。

  - 個別ｵﾌﾞｼﾞｪｸﾄ対応
    - 単一オブジェクトではなく、個別オブジェクトとして認識し整列するかどうか設定します。

  - 配置type[0-2]
    - 開始点または終了点などの、配置を行う順番を指定します。

  - 幅
    - 線に横幅を設定します。

  - └ 交互に配置
    - 線の横に関して、一列づつずらして配置するかどうか設定します。

  - imageを使用[0-1]
    - imageを使用することができます。0で不使用、1で使用を決定します。
    - imageに関しては、image-savingを利用してセーブしたのちに使用してください。

  - └ class
    - imageのclass配列の索引を指定します。

  - └ memory
    - imageのclass配列の中の画像番号を指定します。

  - option(moving)
    - トラックバー`Moving` に、この欄で入力された値を加算します。
  - option(dx)
    - 線のx方向の座標に、この欄で入力された値を加算します。
  - option(dy)
    - 線のy方向の座標に、この欄で入力された値を加算します。

### cycling

円状にオブジェクトをループ配置するスクリプトです。

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - Number
    - 線の長さ(点の個数)を設定します。

  - Rotating
    - 円状に配置する最大角度を設定します。

  - Interval
    - 辺上の各点の間隔を設定します。

  - Moving
    - 線の点群がどれだけ移動するかを設定します。

  - Fixed
    - 点自体が移動せず、固定された状態でスライドのように描画するかどうかを設定します。

- **ダイアログ**

  - 仮想バッファ
    - 仮想バッファを利用して、線を一枚の画像にすることができます。

  - 傾きに従う
    - 線の動きに関して、動く方向に各図形が角度に従うように設定します。

  - 個別ｵﾌﾞｼﾞｪｸﾄ対応
    - 単一オブジェクトではなく、個別オブジェクトとして認識し整列するかどうか設定します。

  - 配置type[0-2]
    - 開始点または終了点などの、配置を行う順番を指定します。

  - 幅
    - 線に横幅を設定します。

  - 交互に配置
    - 線の横に関して、一列づつずらして配置するかどうか設定します。

  - imageを使用[0-1]
    - imageを使用することができます。0で不使用、1で使用を決定します。
    - imageに関しては、image-savingを利用してセーブしたのちに使用してください。

  - class
    - imageのclass配列の索引を指定します。

  - memory
    - imageのclass配列の中の画像番号を指定します。

  - option(moving)
    - トラックバー`Moving` に、この欄で入力された値を加算します。
  - option(dx)
    - x方向の座標に、この欄で入力された値を加算します。
  - option(dy)
    - y方向の座標に、この欄で入力された値を加算します。

### Sinwave

正弦波状にオブジェクトをループ配置するスクリプトです。
`WaveOption` スクリプトを、このスクリプトの手前で実行する必要があります。

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - Angle
    - 線の方向を決めます。

  - add(X)
    - 原点からの差分距離について、正弦波の振幅にどれだけ加算するかを設定します。

  - add(Prod)
    - 原点からの距離(絶対値)について、正弦波の振幅にどれだけ加算するかを設定します。

  - Moving
    - 線の点群がどれだけ移動するかを設定します。

  - Fixed
    - 点自体が移動せず、固定された状態でスライドのように描画するかどうかを設定します。

- **ダイアログ**

  - 仮想バッファ
    - 仮想バッファを利用して、線を一枚の画像にすることができます。
  - wavetype[0-3]:
    - 波形の種類を指定します。
      0. サイン波
      1. 三角波
      2. 矩形波 (ただし上下の長さが1:1となる)
      3. ノコギリ波

  - 傾きに従う
    - 線の動きに関して、動く方向に各図形が角度に従うように設定します。

  - 個別ｵﾌﾞｼﾞｪｸﾄ対応
    - 単一オブジェクトではなく、個別オブジェクトとして認識し整列するかどうか設定します。

  - 配置type[0-2]
    - 開始点または終了点などの、配置を行う順番を指定します。

  - 幅
    - 線に横幅を設定します。

  - 交互に配置
    - 線の横に関して、一列づつずらして配置するかどうか設定します。

  - imageを使用[0-1]
    - imageを使用することができます。0で不使用、1で使用を決定します。
    - imageに関しては、image-savingを利用してセーブしたのちに使用してください。

  - class
    - imageのclass配列の索引を指定します。

  - memory
    - imageのclass配列の中の画像番号を指定します。

  - option(moving)
    - トラックバー`Moving` に、この欄で入力された値を加算します。
  - option(w)
    - 進行方向の座標に、この欄で入力された値を加算します。
  - option(h)
    - 法線方向の座標に、この欄で入力された値を加算します。

### WaveOption

`Sinwave` スクリプトに対して、追加のトラックバーやパラメーターを提供するスクリプトです。
このスクリプトの後で、`Sinwave` スクリプトを配置してください。

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - Length
    - 線の長さ(点の個数)を設定します。

  - Period
    - 正弦波の周期を指定します。

  - Interval
    - 辺上の各点の間隔を設定します。

  - Height
    - 正弦波の振幅を指定します。

### Random

ランダムにオブジェクトを配置するスクリプトです。

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - Width
    - ランダムに配置する領域のX方向の幅を指定します。
  - Height
    - ランダムに配置する領域のY方向の幅を指定します。
  - Number
    - 点の個数を設定します。

  - Drawing
    - 点群をどれだけ描画するかを設定します。設定した個数を超えた時、先に描画したものから順に再描画されます。

  - Fixed on Global
    - 点自体が移動せず、固定された状態でスライドのように描画するかどうかを設定します。

- **ダイアログ**

  - 仮想バッファ
    - 仮想バッファを利用して、線を一枚の画像にすることができます。

  - 回転ﾗﾝﾀﾞﾑ[0-3]
    - どの軸に対してランダムに回転を行うか指定します。0でランダムに回転しません。

  - 個別ｵﾌﾞｼﾞｪｸﾄ対応
    - 単一オブジェクトではなく、個別オブジェクトとして認識し整列するかどうか設定します。

  - Z方向も有効
    - Z方向に対してもランダム配置を行うかどうか指定します。

  - Depth
    - Z方向のランダム配置の度合いを指定します。

  - imageを使用[0-1]
    - imageを使用することができます。0で不使用、1で使用を決定します。
    - imageに関しては、image-savingを利用してセーブしたのちに使用してください。

  - class
    - imageのclass配列の索引を指定します。

  - memory
    - imageのclass配列の中の画像番号を指定します。

  - option(drawing)
    - トラックバー`Drawing` に、この欄で入力された値を加算します。

### image-saving

Repeaterシリーズの各スクリプトで点群の代わりに用いることができるスクリプトです。
このスクリプトは、オブジェクトを画像として保存し使用できるようにします。

基本的に、次のような構造で保存されています。

```plaintext
     image
       |
-----class-----
1, 2, 3, ...
|
-----memory----
1, 2, 3, ...
```

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - class
    - オブジェクトを保存するクラス番号を指定します。

  - memory
    - オブジェクトを保存するクラス内のメモリー番号を指定します。

  - withAlpha
    - アルファ値を保持して保存するかどうか指定します。

  - showinfo
    - オブジェクトの保存情報を表示します。

  - save
    - 保存を実行するかどうか指定します。

### image-reading

Repeaterシリーズの各スクリプトで点群の代わりに用いることができるスクリプトです。
このスクリプトは、画像して保存されたオブジェクトを読み込むことができます。

基本的に、次のような構造で保存されています。

```plaintext
     image
       |
-----class-----
1, 2, 3, ...
|
-----memory----
1, 2, 3, ...
```

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - class
    - オブジェクトを読み込むクラス番号を指定します。

  - memory
    - オブジェクトを読み込むクラス内のメモリー番号を指定します。

  - showinfo
    - オブジェクトの保存情報を表示します。

  - read
    - 読み込みを実行するかどうか指定します。

### image-clearing

Repeaterシリーズの各スクリプトで点群の代わりに用いることができるスクリプトです。
このスクリプトは、画像して保存されたオブジェクトをキャッシュから消去することができます。

基本的に、次のような構造で保存されています。

```plaintext
     image
       |
-----class-----
1, 2, 3, ...
|
-----memory----
1, 2, 3, ...
```

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - class
    - 保存されている画像を削除するクラス番号を指定します。

  - memory
    - 保存されている画像を削除するクラス内のメモリー番号を指定します。

  - showinfo
    - オブジェクトの保存情報を表示します。

  - clear
    - 削除を実行するかどうか指定します。

## 導入方法 / how to install

`Aodaruma.lua`(必要に応じて`rikky_module`)は`plugin`フォルダー、もしくは`Aviutl.exe`があるフォルダーに、`Repeater.anm`は`script`フォルダー以下においてください。

詳しい導入の方法については、[上の階層](https://github.com/Aodaruma/Aodaruma-AviUtl-Script)を参照してください。

## ライセンス / Licence

[上の階層](https://github.com/Aodaruma/Aodaruma-AviUtl-Script)を参照してください。[ここ](https://github.com/Aodaruma/Aodaruma-AviUtl-Script/blob/main/LICENSE)にも書いてあります。

## バグ・意見 / how to report bugs

バグや意見等については、Twitter の DM に送るか、issue を立ち上げてください。

## 変更履歴 / change log

- v1.31 - 配布をGithubリポジトリーに変更。説明文を変更しました。

- v1.3
  - sinwaveについて、Prdにて、heightがマイナスか0か設定できるようにした
  - Lengthを3000まで設定できるようにした。

- v1.2
  - 配置typeを追加。
  - Lengthについて、アニメーションする際小数点を切り捨てるようにした
  - waveoptionのheightが0の時、描画されないバグを修正
  - Intervalが0の時、描画されないバグを修正
  - waveoptionのPeriodが0の時、描画されないバグを修正
  - wavetypeが3の時高さが同じでなかったのを修正(1/2になっていた)

- v1.1
  - バグ修正。および説明文の詳細をさらに追加。

- v1.0
  - 正式版公開。

- v0.95
  - デバッグ版よりバグ修正。

- v0.92
  - デバッグ(アルファ版)公開。
  
- v0.8
  - Aodaruma.luaを使うよう一部変更。

- v0.5,0.6,0.7
  - バグつぶし

- v0.4
  - random作成、および各スクリプトにimageも使用するよう変更

- v0.3
  - image系統作成

- v0.2
  - sinwave、tanwave作成

- v0.1
  - line、cycle作成
