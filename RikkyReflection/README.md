# RikkyReflection

rikky氏が開発したプラグイン`rikky_module`を用いて、簡単に光源反射ができるスクリプトです。

現在は **version 1.12** が最新です。

以下のスクリプトが備わっています。

## RikkyReflection

以下の手順を行うことで、他のスクリプトに対して、光源反射を行うことができます。

1. 光源反射させたいスクリプトを`メモ帳`等で開き、

  ```lua
  obj.draw(...)
  ```

  または

  ```lua
  obj.drawpoly(...)
  ```

  という部分を

  ```lua
  require("rikky_module")
  rikky_module.materialdraw_init(RR[obj.layer]["data"])
  rikky_module.materialdraw(...)
  ```

  に置き換えてください。
  (この時、書き換えた後Aviutlを起動したままであれば再起動、または「F5」を押してください)
2. このスクリプトをオブジェクトのエフェクトとして配置してください

   - **注意**
     - オブジェクトが「カスタムオブジェクト」の場合は、オブジェクトより上のレイヤーに、他の使用しないオブジェクトを追加してこのスクリプトを配置してください。
     - また、「格納レイヤー先」を実行するオブジェクトのレイヤーに合わせておいてください。

3. パラメーターを設定し、カメラ制御にシャドーを追加して、格納を実行してください。
4. オブジェクトをカメラ制御下に置くと光源反射が実現できます。

以下はパラメーターの説明です。

- **トラックバー/チェックボックス**
  - 光源度%
    - 球体の光源の度合いを設定します。
  - ﾊｲﾗｲﾄｼｬｰﾌﾟ
    - ハイライトのぼかし処理を設定します。
  - 格納レイヤー先
    - 光源反射を行うオブジェクトのレイヤーを指定します。
  - 主体化
    - オブジェクトそれ自体が光源反射を行うかどうか設定します。
  - 格納実行
    - 光源反射を行うオブジェクトに用いる各パラメーター情報を保存します。
- **ダイアログ**
  - lightR
    - 光源のRed値を設定します。
  - lightG
    - 光源のGreen値を設定します。
  - lightB
    - 光源のBlue値を設定します。
  - ambientR%
    - 環境光のRed値を設定します。0に設定することで、影が黒くなります。
  - ambientG%
    - 環境光のGreen値を設定します。0に設定することで、影が黒くなります。
  - ambientB%
    - 環境光のBlue値を設定します。0に設定することで、影が黒くなります。
  - emissiveR
    - 発光色のRed値を設定します。0に設定することで、発光しなくなります。
  - emissiveG
    - 球体の発光色のGreen値を設定します。0に設定することで、発光しなくなります。
  - emissiveB
    - 球体の発光色のBlue値を設定します。0に設定することで、発光しなくなります。
  - specularR
    - 球体の反射色のRed値を設定します。0に設定することで、光源に対して反射しなくなります。
  - specularG
    - 反射色のGreen値を設定します。0に設定することで、光源に対して反射しなくなります。
  - specularB

## 導入方法 / how to install

このスクリプトの他に、`rikky_module`プラグインが必要になります。
詳細は[上の階層](https://github.com/Aodaruma/Aodaruma-AviUtl-Script)を参照してください。

## ライセンス / Licence

[上の階層](https://github.com/Aodaruma/Aodaruma-AviUtl-Script)を参照してください。[ここ](https://github.com/Aodaruma/Aodaruma-AviUtl-Script/blob/main/LICENSE)にも書いてあります。

## バグ・意見 / how to report bugs

バグや意見等については、Twitter の DM に送るか、issue を立ち上げてください。

## 変更履歴 / change log

- v1.12 - 配布を Github リポジトリーに変更。説明文を変更しました。
- v1.1
  - 中間的スクリプトから主要的スクリプトにも対応。
  - 自スクリプトのみで光源反射をさせることにした。
- v1.0 -  作成&配布
